# GraphQL API types

This folder contains the following files:

## Queries.ts

This file contains autogenerated type definitions for all queries found in this project.
The type definitions describe precisely the type of values returned by each GraphQL query,
i.e., they only contain properties that are actually queried.

To update this file, run `make update-graphql-types` and manually edit the header.

## DamlLfType, DamlLfValue, OpaqueTypes

All other files contain hand-written definitions of opaque types used in the GraphQL API.

## fragmentTypes.json

Contains information about GraphQL interfaces, required for matching on interfaces or unions.
See https://www.apollographql.com/docs/react/advanced/fragments.html#fragment-matcher.

Update using the following code (should eventually be updated as part of the build process)
```
fetch(`http://localhost:8000/api/graphql`, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    variables: {},
    query: `
      {
        __schema {
          types {
            kind
            name
            possibleTypes {
              name
            }
          }
        }
      }
    `,
  }),
})
  .then(result => result.json())
  .then(result => {
    // here we're filtering out any type information unrelated to unions or interfaces
    const filteredData = result.data.__schema.types.filter(
      type => type.possibleTypes !== null,
    );
    result.data.__schema.types = filteredData;
    console.log(JSON.stringify(result.data, undefined, "  "))
})
```
