-- Copyright (c) 2020, Digital Asset (Switzerland) GmbH and/or its affiliates.
-- All rights reserved.

-- Check that the submitted update is only evaluated when the script
-- is evaluated.

-- @TODO This test no longer works with scripts, as scripts submit commands that are pre-evaluated, rather than running Updates which are deferred
module SubmitFail where

import Daml.Script

main = script do
  alice <- allocateParty "Alice"

  -- let _ = submit alice (error "submit-error" : Commands ())
  -- let _ = submit alice (pure (error "submit-pure-error") : Commands ())

  -- submitMustFail alice (error "fail-error" : Commands ())
  -- submitMustFail alice (pure (error "fail-pure-error": ()))
  pure ()
