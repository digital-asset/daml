-- @ERROR range=17:1-17:19; Attempt to create a contract key with an empty set of maintainers
-- @TODO Query loses errors, ideally below is: Attempt to fetch, lookup or exercise a contract key with an empty set of maintainers
-- @ERROR range=23:1-23:18; Couldn't see contract with key 'Alice'
module EmptyContractKeyMaintainers where

import Daml.Script
import ScriptAssertHelpers

template NoMaintainer
  with
    sig: Party
  where
    signatory sig
    key sig : Party
    maintainer [] @Party

createNoMaintainer = script do
  alice <- allocateParty "Alice"

  submit alice $ createCmd NoMaintainer with sig = alice
  pure ()

queryNoMaintainer = script do
  alice <- allocateParty "Alice"

  canSeeKey @NoMaintainer alice alice
  pure ()
