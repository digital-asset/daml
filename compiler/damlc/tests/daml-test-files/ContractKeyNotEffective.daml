-- @ERROR range=16:1-16:19; Couldn't see contract with key 'alice'
module ContractKeyNotEffective where

import Daml.Script
import DA.Time
import ScriptAssertHelpers

template T
  with
    p : Party
  where
    signatory p
    key p : Party
    maintainer key

fetchByKeyMustFail = script do
  p <- allocateParty "alice"
  submit p $ createCmd (T p)
  passTime (- seconds 1)
  queryAssertContractKey @T p p
