-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.
-- SPDX-License-Identifier: Apache-2.0

-- @ENABLE-SCENARIOS

module Loop where

loop : Int -> ()
loop x = loop (x + 1) 

-- @ERROR range=12:1-12:25; Evaluation times out after 5 seconds
loop_in_scenario_machine = scenario do
  alice <- getParty "p"
  pure $ loop 1
  
template Helper
  with
    p : Party
  where
    signatory p
    choice Go : ()
      controller p
      do
        pure $ loop 1

-- @ERROR range=27:1-27:23; Evaluation times out after 5 seconds
loop_in_ledger_machine = scenario do 
   alice <- getParty "p"
   alice `submit` createAndExercise (Helper alice) Go
  
