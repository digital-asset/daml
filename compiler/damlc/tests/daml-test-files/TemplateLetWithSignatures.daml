-- Copyright (c) 2020, Digital Asset (Switzerland) GmbH and/or its affiliates.
-- All rights reserved.

-- Testing with template-let warning disabled until the feature is removed
-- https://github.com/digital-asset/daml/issues/17263
{-# OPTIONS_GHC -Wno-template-let #-}

module TemplateLetWithSignatures where

-- This example should fail to type check.
-- There was a bug reported: https://github.com/digital-asset/daml/issues/7902
-- which indicated that the signature was being ignored.
-- It is now not ignored, and the example does indeed fail to type check.

template T
  with
    p : Party
  where
    signatory p
    let q : Int
        q = p
    choice C : ()
      controller q
      do pure ()

-- @ERROR Couldn't match expected type ‘Int’ with actual type ‘Party’
