# Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

load(":util.bzl", "daml_ledger_export_test")

# Compare the generated Daml ledger export to the example export used in the
# documentation. This functions as both a golden test on ledger exports and to
# make sure that the documentation stays up-to-date.
daml_ledger_export_test(
    name = "example-export",
    dar = "//daml-script/test:script-test.dar",
    script_identifier = "ScriptExample:initializeFixed",
    parties = ["Alice", "Bob"],
    expected_daml = "//docs:source/tools/export/output-root/Export.daml",
    expected_args_json = "//docs:source/tools/export/output-root/args.json",
    expected_daml_yaml = "//docs:source/tools/export/output-root/daml.yaml",
    out_daml = "Export.daml",
    out_args_json = "args.json",
    out_daml_yaml = "daml.yaml",
)
