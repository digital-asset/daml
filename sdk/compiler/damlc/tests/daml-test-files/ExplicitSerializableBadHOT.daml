-- Copyright (c) 2026, Digital Asset (Switzerland) GmbH and/or its affiliates.
-- All rights reserved.

-- @BUILD-OPTION --explicit-serializable=yes
-- @ERROR range=20:10-23:42; error type checking data type ExplicitSerializableBadHOT.Asset: expected serializable type
module ExplicitSerializableBadHOT where

data NonSerializable = NonSerializable with
  foo : Int
  bar : Party
    deriving (Eq, Show)

data SeriHOT a = SeriHOT with
  payload : a
  label : Text
    deriving (Eq, Show)

instance Serializable a => Serializable (SeriHOT a)

template Asset
  with
    party : Party
    problematic : SeriHOT NonSerializable
  where
    signatory party
