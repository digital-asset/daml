-- Copyright (c) 2020, Digital Asset (Switzerland) GmbH and/or its affiliates.
-- All rights reserved.

-- @ SINCE-LF 2.1
-- @QUERY-LF ([$pkg | .modules[] | .values[] | .expr | lf::norm_interned($pkg) | .val.module.package_id | select(has("imported_package_id_interned_str"))] | length) as $actual | if $actual == 2 then true else {"expected": 2, "actual": $actual} end

-- @QUERY-LF $pkg | .interned_strings | length >= 2

-- We test that interning of package ids works. The two packages we reference are
-- daml-prim and daml-stdlib.

module InternedExternalRefs where

reverseCopy = reverse  -- this is a reference to daml-stdlib

errorCopy = error  -- this is a reference to daml-prim
