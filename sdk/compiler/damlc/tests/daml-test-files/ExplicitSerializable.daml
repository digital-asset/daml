-- Copyright (c) 2026, Digital Asset (Switzerland) GmbH and/or its affiliates.
-- All rights reserved.

-- @OPTIONS --explicit-serializable=yes
-- @ERROR range=1:1-2:1; error type checking data type ExplicitSerializable.BadCurrency
module ExplicitSerializable where

data Currency = Currency with
  admin : Party
  instrument : Text
    deriving (Eq, Show)

instance Serializable Currency

data BadCurrency = BadCurrency with
  admin : Party
  instrument : () -> ()

instance Show BadCurrency where show _ = "BadCurrency"
instance Eq BadCurrency where _ == _ = True

-- This should error regardless of whether or not it occurs in a template
instance Serializable BadCurrency

template Asset
  with
    amount : Decimal
    party : Party
    currency : Currency
  where
    signatory party
