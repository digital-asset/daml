-- Copyright (c) 2026, Digital Asset (Switzerland) GmbH and/or its affiliates.
-- All rights reserved.

-- @BUILD-OPTIONS --explicit-serializable=yes
-- @QUERY-LF $pkg | .modules[] | .data_types[] | select(lf::get_dotted_name($pkg) == ["SeriDataType"]) | has("serializable")
-- @QUERY-LF $pkg | .modules[] | .data_types[] | select(lf::get_dotted_name($pkg) == ["SeriEnum"]) | has("serializable")
-- @QUERY-LF $pkg | .modules[] | .data_types[] | select(lf::get_dotted_name($pkg) == ["SeriVariant"]) | has("serializable")
-- @QUERY-LF $pkg | .modules[] | .data_types[] | select(lf::get_dotted_name($pkg) == ["SeriImported"]) | has("serializable")
-- @QUERY-LF $pkg | .modules[] | .data_types[] | select(lf::get_dotted_name($pkg) == ["Helper"]) | has("serializable") | not
-- @QUERY-LF $pkg | .modules[] | .data_types[] | select(lf::get_dotted_name($pkg) == ["Asset"]) | has("serializable")
module ExplicitSerializable where

import qualified ExplicitSerializable.Imported as I

data SeriDataType = SeriDataType with
  foo : Int
  bar : Party
    deriving (Eq, Show)

instance Serializable SeriDataType

data SeriEnum = Green | Blue deriving (Eq, Show)

instance Serializable SeriEnum

data SeriVariant = SVEnum SeriEnum | SVDataType SeriDataType
  deriving (Eq, Show)

instance Serializable SeriVariant

data Helper = Helper with
  seri : SeriDataType
  foo : Int

template Asset
  with
    party : Party
    seriDataType : SeriDataType
    seriEnum : SeriEnum
    seriVariant : SeriVariant
    seriImported : I.SeriImported
    seriList : [SeriDataType]
  where
    signatory party
