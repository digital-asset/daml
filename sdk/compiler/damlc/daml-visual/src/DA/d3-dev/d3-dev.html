<!-- Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<html>

<head>
    <title>Daml Visualization</title>
    <meta charset="utf-8">
    <script src="/d3plus.v1.9.8/js/d3.js"></script>
    <script src="/d3plus.v1.9.8/js/d3plus.js"></script>
</head>

<body>
    <div id='viz'></div>

    <script>
        var nodes = [
            { "fields": "buyer\nseller\nbaseIouCid\nbaseIssuer\nbaseCurrency\nbaseAmount\nquoteIssuer\nquoteCurrency\nquoteAmount\n", "tplName": "IouTrade", "id": 0, "chcName": "Create" },
            { "fields": "buyer\nseller\nbaseIouCid\nbaseIssuer\nbaseCurrency\nbaseAmount\nquoteIssuer\nquoteCurrency\nquoteAmount\n", "tplName": "IouTrade", "id": 1, "chcName": "Archive" },
            { "fields": "buyer\nseller\nbaseIouCid\nbaseIssuer\nbaseCurrency\nbaseAmount\nquoteIssuer\nquoteCurrency\nquoteAmount\n", "tplName": "IouTrade", "id": 2, "chcName": "IouTrade_Accept" },
            { "fields": "buyer\nseller\nbaseIouCid\nbaseIssuer\nbaseCurrency\nbaseAmount\nquoteIssuer\nquoteCurrency\nquoteAmount\n", "tplName": "IouTrade", "id": 3, "chcName": "TradeProposal_Reject" }, { "fields": "issuer\nowner\ncurrency\namount\nobservers\n", "tplName": "Iou", "id": 4, "chcName": "Create" },
            { "fields": "issuer\nowner\ncurrency\namount\nobservers\n", "tplName": "Iou", "id": 5, "chcName": "Archive" },
            { "fields": "issuer\nowner\ncurrency\namount\nobservers\n", "tplName": "Iou", "id": 6, "chcName": "Iou_Split" },
            { "fields": "issuer\nowner\ncurrency\namount\nobservers\n", "tplName": "Iou", "id": 7, "chcName": "Iou_Merge" },
            { "fields": "issuer\nowner\ncurrency\namount\nobservers\n", "tplName": "Iou", "id": 8, "chcName": "Iou_Transfer" },
            { "fields": "issuer\nowner\ncurrency\namount\nobservers\n", "tplName": "Iou", "id": 9, "chcName": "Iou_AddObserver" },
            { "fields": "issuer\nowner\ncurrency\namount\nobservers\n", "tplName": "Iou", "id": 10, "chcName": "Iou_RemoveObserver" },
            { "fields": "iou.issuer\niou.owner\niou.currency\niou.amount\niou.observers\nnewOwner\n", "tplName": "IouTransfer", "id": 11, "chcName": "Create" },
            { "fields": "iou.issuer\niou.owner\niou.currency\niou.amount\niou.observers\nnewOwner\n", "tplName": "IouTransfer", "id": 12, "chcName": "Archive" },
            { "fields": "iou.issuer\niou.owner\niou.currency\niou.amount\niou.observers\nnewOwner\n", "tplName": "IouTransfer", "id": 13, "chcName": "IouTransfer_Cancel" },
            { "fields": "iou.issuer\niou.owner\niou.currency\niou.amount\niou.observers\nnewOwner\n", "tplName": "IouTransfer", "id": 14, "chcName": "IouTransfer_Reject" },
            { "fields": "iou.issuer\niou.owner\niou.currency\niou.amount\niou.observers\nnewOwner\n", "tplName": "IouTransfer", "id": 15, "chcName": "IouTransfer_Accept" }
        ]


        var links = [
            { "source": 2, "target": 8, "weight": 10 },
            { "source": 2, "target": 15, "weight": 10 },
            { "source": 6, "target": 4, "weight": 10 },
            { "source": 7, "target": 4, "weight": 10 },
            { "source": 7, "target": 5, "weight": 10 },
            { "source": 8, "target": 11, "weight": 10 },
            { "source": 9, "target": 4, "weight": 10 },
            { "source": 10, "target": 4, "weight": 10 },
            { "source": 13, "target": 4, "weight": 10 },
            { "source": 14, "target": 4, "weight": 10 },
            { "source": 15, "target": 4, "weight": 10 }
        ]
        d3plus.viz()
            .container('#viz')
            .type('network')
            .data(nodes)
            .text('chcName')
            .edges({ value: links, arrows: true })
            .tooltip({
                Template: function (d) { return d['tplName'] },
                Fields: function (d) { return d['fields']; }
            })
            .draw();
    </script>
</body>

</html>
