module Assets where

import DA.TextMap

data Meta = Meta with meta : TextMap Text
  deriving (Eq, Show)

template Iou
  with
    issuer: Party
    owner: Party
    amount: Decimal
    meta: Optional Meta -- added in V2
  where
    signatory issuer
    observer owner
    choice TransferIou: ContractId Iou
      with
        newOwner: Party
        newMeta: Optional Meta -- added in V2
      controller owner
        do create this with owner = newOwner, meta = newMeta

template Share
  with
    registry : Party
    holder : Party
    company : Text
    meta: Optional Meta -- added in V2
  where
    signatory registry
    observer holder
    choice TransferShare : ContractId Share
      with
        newHolder: Party
        newMeta: Optional Meta -- added in V2
      controller holder
        do create this with holder = newHolder, meta = newMeta
