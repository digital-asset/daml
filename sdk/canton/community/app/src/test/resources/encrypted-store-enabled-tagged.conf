# Example configuration for a synchronizer
canton.sequencers.sequencer1.crypto = ${_shared_aws.crypto}
canton.mediators.mediator1.crypto = ${_shared_aws.crypto}
canton.participants.participant3.crypto = ${_shared_aws.crypto}

# user-manual-entry-begin: EncryptedStoreConfigSynchronizerAwsKms
_shared_aws {
  # Configure an AWS KMS
  crypto {
    kms {
      type = aws
      region = us-east-1
      multi-region-key = false
      audit-logging = false
    }

    # Configure an encrypted store with KMS
    private-key-store {
      encryption.type = kms
      # In this example we are using the same wrapper key for all nodes. This is not recommended and you should
      # either let Canton generate those keys or choose a different one for each node.
      encryption.wrapper-key-id = alias/canton-kms-test-key
    }
  }
}
# user-manual-entry-end: EncryptedStoreConfigSynchronizerAwsKms

# user-manual-entry-begin: EncryptedStoreConfigSynchronizerGcpKms
_shared_gcp {
  # Configure an GCP KMS
  crypto {
    kms {
      type = gcp
      location-id = us-east1
      project-id = gcp-kms-testing
      key-ring-id = canton-test-keys-2023
      audit-logging = false # optional, default is false
    }

    # Configure an encrypted store with KMS
    private-key-store {
      encryption.type = kms
      # In this example we are using the same wrapper key for all nodes. This is not recommended and you should
      # either let Canton generate those keys or choose a different one for each node.
      encryption.wrapper-key-id = canton-kms-test-key
    }
  }
}
# user-manual-entry-end: EncryptedStoreConfigSynchronizerGcpKms

# user-manual-entry-begin: PrivateKeyStoreConfig
canton.participants.participant1.crypto.private-key-store.encryption.type = kms
# user-manual-entry-end: PrivateKeyStoreConfig

# For AWS KMS this can be the key id, arn or alias.
# user-manual-entry-begin: KmsKeyConfig
canton.participants.participant1.crypto.private-key-store.encryption.wrapper-key-id = alias/canton-kms-test-key
# user-manual-entry-end: KmsKeyConfig

# user-manual-entry-begin: AwsKmsConfig
canton.participants.participant1.crypto.kms {
	type = aws
	region = us-east-1
	multi-region-key = false # optional, default is false
	audit-logging = false # optional, default is false
}
# user-manual-entry-end: AwsKmsConfig

canton.participants.participant2.crypto.private-key-store.encryption.type = kms
canton.participants.participant2.crypto.private-key-store.encryption.wrapper-key-id = canton-kms-test-key
# user-manual-entry-begin: GcpKmsConfig
canton.participants.participant2.crypto.kms {
    type = gcp
    location-id = us-east1
    project-id = gcp-kms-testing
    key-ring-id = canton-test-keys-2023
    audit-logging = false # optional, default is false
}
# user-manual-entry-end: GcpKmsConfig
